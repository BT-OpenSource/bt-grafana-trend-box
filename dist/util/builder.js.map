{"version":3,"sources":["../../src/util/builder.js"],"names":["_","Builder","options","seriesList","cleanedSeries","map","_cleanup","oldestValue","_oldestValueFor","latestValue","_latestValueFor","series","filter","datapoints","point","reduce","memo","points","length"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;yBAEMC,O;AACX,yBAAaC,OAAb,EAAsB;AAAA;;AACpB,eAAKA,OAAL,GAAeA,OAAf;AACD;;;;iCAEsB;AAAA,gBAAjBC,UAAiB,uEAAJ,EAAI;;AACrB,gBAAIC,gBAAgBJ,EAAEK,GAAF,CAAMF,UAAN,EAAkB,KAAKG,QAAvB,CAApB;;AAEA,mBAAO,EAAEC,aAAa,KAAKC,eAAL,CAAqBJ,aAArB,CAAf;AACLK,2BAAa,KAAKC,eAAL,CAAqBN,aAArB,CADR,EAAP;AAED;;;mCAESO,M,EAAQ;AAChB,mBAAOX,EAAEY,MAAF,CAASD,OAAOE,UAAhB,EAA4B,UAACC,KAAD;AAAA,qBAAWA,MAAM,CAAN,KAAY,IAAvB;AAAA,aAA5B,CAAP;AACD;;;0CAEgBV,a,EAAe;AAC9B,mBAAOJ,EAAEe,MAAF,CAASX,aAAT,EAAwB,UAACY,IAAD,EAAOC,MAAP,EAAkB;AAC/C,kBAAIH,QAAQG,OAAO,CAAP,CAAZ;AACA,qBAAOD,QAAQF,QAAQA,MAAM,CAAN,CAAR,GAAmB,CAA3B,CAAP;AACD,aAHM,EAGJ,CAHI,CAAP;AAID;;;0CAEgBV,a,EAAe;AAC9B,mBAAOJ,EAAEe,MAAF,CAASX,aAAT,EAAwB,UAACY,IAAD,EAAOC,MAAP,EAAkB;AAC/C,kBAAIH,QAAQG,OAAOA,OAAOC,MAAP,GAAgB,CAAvB,CAAZ;AACA,qBAAOF,QAAQF,QAAQA,MAAM,CAAN,CAAR,GAAmB,CAA3B,CAAP;AACD,aAHM,EAGJ,CAHI,CAAP;AAID","file":"builder.js","sourcesContent":["import _ from 'lodash'\n\nexport class Builder {\n  constructor (options) {\n    this.options = options\n  }\n\n  call (seriesList = []) {\n    var cleanedSeries = _.map(seriesList, this._cleanup)\n\n    return { oldestValue: this._oldestValueFor(cleanedSeries),\n      latestValue: this._latestValueFor(cleanedSeries) }\n  }\n\n  _cleanup (series) {\n    return _.filter(series.datapoints, (point) => point[0] != null)\n  }\n\n  _oldestValueFor (cleanedSeries) {\n    return _.reduce(cleanedSeries, (memo, points) => {\n      var point = points[0]\n      return memo + (point ? point[0] : 0)\n    }, 0)\n  }\n\n  _latestValueFor (cleanedSeries) {\n    return _.reduce(cleanedSeries, (memo, points) => {\n      var point = points[points.length - 1]\n      return memo + (point ? point[0] : 0)\n    }, 0)\n  }\n}\n"]}
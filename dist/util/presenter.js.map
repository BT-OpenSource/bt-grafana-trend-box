{"version":3,"sources":["../../src/util/presenter.js"],"names":["_","Presenter","options","box","percentChange","_percentChangeFor","color","_colorFor","thresholds","concat","sort","a","b","value","threshold","find","defaultColor","change","latestValue","oldestValue"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;2BAEMC,S;AACX,2BAAaC,OAAb,EAAsB;AAAA;;AACpB,eAAKA,OAAL,GAAeA,OAAf;AACD;;;;+BAEKC,G,EAAK;AACTA,gBAAIC,aAAJ,GAAoB,KAAKC,iBAAL,CAAuBF,GAAvB,CAApB;AACAA,gBAAIG,KAAJ,GAAY,KAAKC,SAAL,CAAeJ,IAAIC,aAAnB,CAAZ;AACD;;;oCAEUA,a,EAAe;AACxB,gBAAII,aAAa,KAAKN,OAAL,CAAaM,UAAb,CAAwBC,MAAxB,GAAiCC,IAAjC,CAAsC,UAACC,CAAD,EAAIC,CAAJ;AAAA,qBAAUA,EAAEC,KAAF,GAAUF,EAAEE,KAAtB;AAAA,aAAtC,CAAjB;AACA,gBAAIC,YAAYd,EAAEe,IAAF,CAAOP,UAAP,EAAmB,UAACM,SAAD;AAAA,qBAAeV,iBAAiBU,UAAUD,KAA1C;AAAA,aAAnB,CAAhB;AACA,mBAAOC,YAAYA,UAAUR,KAAtB,GAA8B,KAAKJ,OAAL,CAAac,YAAlD;AACD;;;4CAEkBb,G,EAAK;AACtB,gBAAIc,SAASd,IAAIe,WAAJ,GAAkBf,IAAIgB,WAAnC;AACA,mBAAQF,SAASd,IAAIgB,WAAd,GAA6B,GAApC;AACD","file":"presenter.js","sourcesContent":["import _ from 'lodash'\n\nexport class Presenter {\n  constructor (options) {\n    this.options = options\n  }\n\n  call (box) {\n    box.percentChange = this._percentChangeFor(box)\n    box.color = this._colorFor(box.percentChange)\n  }\n\n  _colorFor (percentChange) {\n    var thresholds = this.options.thresholds.concat().sort((a, b) => b.value - a.value)\n    var threshold = _.find(thresholds, (threshold) => percentChange >= threshold.value)\n    return threshold ? threshold.color : this.options.defaultColor\n  }\n\n  _percentChangeFor (box) {\n    var change = box.latestValue - box.oldestValue\n    return (change / box.oldestValue) * 100\n  }\n}\n"]}